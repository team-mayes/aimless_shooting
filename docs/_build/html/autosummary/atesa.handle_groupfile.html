

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>atesa.handle_groupfile &mdash; atesa  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="atesa.find_ts_loop" href="atesa.find_ts_loop.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> atesa
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">For Users:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Under the Hood:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../functions.html">Function Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="atesa.main.html">atesa.main</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.main_loop.html">atesa.main_loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.interact.html">atesa.interact</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.makebatch.html">atesa.makebatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.subbatch.html">atesa.subbatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.spawnthread.html">atesa.spawnthread</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.checkcommit.html">atesa.checkcommit</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.standalone_checkcommit.html">atesa.standalone_checkcommit</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.pickframe.html">atesa.pickframe</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.get_rc_value.html">atesa.get_rc_value</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.cleanthread.html">atesa.cleanthread</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.candidatevalues.html">atesa.candidatevalues</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.revvels.html">atesa.revvels</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.update_progress.html">atesa.update_progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.cv_analysis_func.html">atesa.cv_analysis_func</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.zip_for_transfer_func.html">atesa.zip_for_transfer_func</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.initialize_eps.html">atesa.initialize_eps</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.init_find_ts.html">atesa.init_find_ts</a></li>
<li class="toctree-l2"><a class="reference internal" href="atesa.find_ts_loop.html">atesa.find_ts_loop</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">atesa.handle_groupfile</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">atesa</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../functions.html">Function Documentation</a> &raquo;</li>
        
      <li>atesa.handle_groupfile</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/autosummary/atesa.handle_groupfile.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="atesa-handle-groupfile">
<h1>atesa.handle_groupfile<a class="headerlink" href="#atesa-handle-groupfile" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="atesa.handle_groupfile">
<code class="sig-prename descclassname">atesa.</code><code class="sig-name descname">handle_groupfile</code><span class="sig-paren">(</span><em class="sig-param">job_to_add=''</em>, <em class="sig-param">settings=&lt;class 'argparse.Namespace'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/atesa/atesa.html#handle_groupfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#atesa.handle_groupfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Update attributes of settings.groupfile_list and return name of the groupfile that should be written to next.</p>
<p>Routine to handle groupfiles when necessary (i.e., when groupfile &gt; 0). Maintains a list object keeping track of
existing groupfiles and their contents as well as their statuses and ages. This function is called in makebatch()
to return the name of the groupfile that that function should be writing to, and subbatch() redirects here when
groupfile &gt; 0. Finally, it is called at the end of every main_loop loop to update statuses as needed.</p>
<p>job_to_add is an optional argument; if present, this function appends the name of the job given to the &lt;CONTENTS&gt;
field for the groupfile that it returns. This puts the onus on the code that calls handle_groupfile() to actually
put that job in that groupfile, of course!</p>
<dl>
<dt>Process flow for this function:</dt><dd><ol class="arabic simple">
<li><p>iterate through existing list of groupfiles as read from settings.groupfile_list</p></li>
<li><p>update statuses as necessary</p></li>
<li><p>submit any of them that have status “construction” and length == settings.groupfile, or
age &gt; settings.groupfile_max_delay and length &gt;= 1 (where length means number of lines)</p></li>
<li><p>if the list no longer contains any with status “construction”, make a new, blank one and return its name</p></li>
<li><p>otherwise, return the name of the groupfile with status “construction”</p></li>
</ol>
</dd>
<dt>Format of each sublist of settings.groupfile_list: [&lt;NAME&gt;, &lt;STATUS&gt;, &lt;CONTENTS&gt;, &lt;TIME&gt;]</dt><dd><p>&lt;NAME&gt; is the name of the groupfile
&lt;STATUS&gt; is any of:</p>
<blockquote>
<div><p>“construction”, meaning this groupfile is the one to add new lines to (only one of these at a time),
“completed”, meaning the groupfile was submitted and has since terminated,
“processed”, meaning the groupfile has been fed through main_loop and followup jobs submitted, or
a string of numbers indicating a jobid of a currently-running groupfile</p>
</div></blockquote>
<p>&lt;CONTENTS&gt; is a list of the jobs contained in the groupfile (their (thread.name + ‘_’ + thread.type) values)
&lt;TIME&gt; is the time in seconds when the groupfile was created</p>
<blockquote>
<div><p>if the current time - TIME &gt; settings.groupfile_max_delay, then the groupfile is submitted regardless of length
(assuming it’s at least of length 1)</p>
</div></blockquote>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job_to_add</strong> (<em>str</em>) – Name of job to append to the current groupfile’s settings.groupfile_list entry. Default = ‘’ (don’t add any jobs)</p></li>
<li><p><strong>settings</strong> (<em>Namespace</em>) – Global settings Namespace object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Name of the groupfile to which new jobs should be appended.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="atesa.find_ts_loop.html" class="btn btn-neutral float-left" title="atesa.find_ts_loop" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Tucker Burgin.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>